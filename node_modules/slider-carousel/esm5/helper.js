import { Injectable, ComponentFactoryResolver, ApplicationRef, Injector, EmbeddedViewRef, ComponentRef } from '@angular/core';
import { Observable } from 'rxjs';
import { SliderCarouselPreviewComponent } from './slider-carousel-preview/slider-carousel-preview.component';
var Helper = /** @class */ (function () {
    function Helper(componentFactoryResolver, appRef, injector) {
        this.componentFactoryResolver = componentFactoryResolver;
        this.appRef = appRef;
        this.injector = injector;
    }
    Helper.prototype.openPreview = function (data) {
        if (data === void 0) { data = {}; }
        var onCloseSubscribe;
        var object;
        object = {
            onClose: new Observable(function (subscribe) { return onCloseSubscribe = subscribe; }),
            instance: null
        };
        var componenRef = this.createComponent(SliderCarouselPreviewComponent, data, function (data) {
            onCloseSubscribe.next(data);
        });
        object.instance = componenRef.instance;
        return object;
    };
    Helper.prototype.createComponent = function (component, data, onClose) {
        var _this = this;
        var componentRef = this.componentFactoryResolver
            .resolveComponentFactory(component)
            .create(this.injector);
        if (!data)
            data = {};
        data.close = function (data) {
            _this.appRef.detachView(componentRef.hostView);
            componentRef.destroy();
            if (onClose)
                onClose(data);
        };
        Object.assign(componentRef.instance, { modalRef: data });
        this.appRef.attachView(componentRef.hostView);
        var domElem = componentRef.hostView.rootNodes[0];
        document.body.appendChild(domElem);
        return componentRef;
    };
    Helper.prototype.smoothScroll = function (element, scroll, duration, direction) {
        if (duration === void 0) { duration = 400; }
        if (direction === void 0) { direction = 'top'; }
        var start = direction === 'top' ? element.scrollTop : element.scrollLeft;
        if (scroll < 0)
            scroll = 0;
        var distance = (scroll - start) - 77;
        var startTime = new Date().getTime();
        if (!duration)
            duration = 400;
        var easeInOutQuart = function (time, from, distance, duration) {
            if ((time /= duration / 2) < 1)
                return distance / 2 * time * time * time * time + from;
            return -distance / 2 * ((time -= 2) * time * time * time - 2) + from;
        };
        var timer = setInterval(function () {
            var time = new Date().getTime() - startTime, newScroll = easeInOutQuart(time, start, distance, duration);
            if (time >= duration) {
                clearInterval(timer);
                timer = null;
            }
            if (element.scrollTo) {
                if (direction === 'top')
                    element.scrollTo(element.scrollLeft, newScroll);
                else
                    element.scrollTo(newScroll, element.scrollTop);
            }
            else {
                if (direction === 'top')
                    element.scrollTop = newScroll;
                else
                    element.scrollLeft = newScroll;
            }
        }, 1000 / 60);
        return timer;
    };
    Helper.prototype.elementIsChild = function (element, parentElment) {
        try {
            while (element && element.tagName.toUpperCase() !== 'BODY') {
                if (element === parentElment) {
                    return true;
                }
                element = element.parentNode;
            }
            return false;
        }
        catch (_a) {
            return false;
        }
    };
    Helper.prototype.isMobileDevice = function () {
        return (typeof window.orientation !== "undefined") || (navigator.userAgent.indexOf('IEMobile') !== -1);
    };
    Helper.ctorParameters = function () { return [
        { type: ComponentFactoryResolver },
        { type: ApplicationRef },
        { type: Injector }
    ]; };
    Helper.decorators = [
        { type: Injectable }
    ];
    Helper.ctorParameters = function () { return [
        { type: ComponentFactoryResolver },
        { type: ApplicationRef },
        { type: Injector }
    ]; };
    return Helper;
}());
export { Helper };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVscGVyLmpzIiwic291cmNlUm9vdCI6Im5nOi8vc2xpZGVyLWNhcm91c2VsLyIsInNvdXJjZXMiOlsiaGVscGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsd0JBQXdCLEVBQUUsY0FBYyxFQUFFLFFBQVEsRUFBRSxlQUFlLEVBQUUsWUFBWSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzlILE9BQU8sRUFBRSxVQUFVLEVBQWMsTUFBTSxNQUFNLENBQUM7QUFDOUMsT0FBTyxFQUFFLDhCQUE4QixFQUFFLE1BQU0sNkRBQTZELENBQUM7QUFFN0c7SUFHSSxnQkFDWSx3QkFBa0QsRUFDbEQsTUFBc0IsRUFDdEIsUUFBa0I7UUFGbEIsNkJBQXdCLEdBQXhCLHdCQUF3QixDQUEwQjtRQUNsRCxXQUFNLEdBQU4sTUFBTSxDQUFnQjtRQUN0QixhQUFRLEdBQVIsUUFBUSxDQUFVO0lBRzlCLENBQUM7SUFFRyw0QkFBVyxHQUFsQixVQUFtQixJQUFpQztRQUFqQyxxQkFBQSxFQUFBLFNBQWlDO1FBQzdDLElBQUksZ0JBQWlDLENBQUM7UUFDNUMsSUFBSSxNQUdHLENBQUM7UUFFRixNQUFNLEdBQUc7WUFDTCxPQUFPLEVBQUUsSUFBSSxVQUFVLENBQUMsVUFBQyxTQUFTLElBQUssT0FBQSxnQkFBZ0IsR0FBRyxTQUFTLEVBQTVCLENBQTRCLENBQUM7WUFDcEUsUUFBUSxFQUFFLElBQUk7U0FDakIsQ0FBQztRQUVGLElBQUksV0FBVyxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsOEJBQThCLEVBQUUsSUFBSSxFQUFFLFVBQUMsSUFBSTtZQUM5RSxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDaEMsQ0FBQyxDQUFDLENBQUM7UUFDSCxNQUFNLENBQUMsUUFBUSxHQUFJLFdBQTRELENBQUMsUUFBUSxDQUFDO1FBRXpGLE9BQU8sTUFBTSxDQUFDO0lBQ2xCLENBQUM7SUFFTSxnQ0FBZSxHQUF0QixVQUF1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ZXIsIEFwcGxpY2F0aW9uUmVmLCBJbmplY3RvciwgRW1iZWRkZWRWaWV3UmVmLCBDb21wb25lbnRSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE9ic2VydmFibGUsIFN1YnNjcmliZXIgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IFNsaWRlckNhcm91c2VsUHJldmlld0NvbXBvbmVudCB9IGZyb20gJy4vc2xpZGVyLWNhcm91c2VsLXByZXZpZXcvc2xpZGVyLWNhcm91c2VsLXByZXZpZXcuY29tcG9uZW50JztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIEhlbHBlciB7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21wb25lbnRGYWN0b3J5UmVzb2x2ZXI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcbiAgICAgICAgcHJpdmF0ZSBhcHBSZWY6IEFwcGxpY2F0aW9uUmVmLFxuICAgICAgICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvclxuICAgICkge1xuXG4gICAgfVxuXHRcblx0cHVibGljIG9wZW5QcmV2aWV3KGRhdGE6IHsgW2tleTogc3RyaW5nXTogYW55IH0gPSB7fSkge1xuICAgICAgICBsZXQgb25DbG9zZVN1YnNjcmliZTogU3Vic2NyaWJlcjxhbnk+O1xuXHRcdGxldCBvYmplY3Q6IHtcbiAgICAgICAgICAgIG9uQ2xvc2U6IE9ic2VydmFibGU8YW55PixcbiAgICAgICAgICAgIGluc3RhbmNlOiBTbGlkZXJDYXJvdXNlbFByZXZpZXdDb21wb25lbnRcbiAgICAgICAgfTtcblxuICAgICAgICBvYmplY3QgPSB7XG4gICAgICAgICAgICBvbkNsb3NlOiBuZXcgT2JzZXJ2YWJsZSgoc3Vic2NyaWJlKSA9PiBvbkNsb3NlU3Vic2NyaWJlID0gc3Vic2NyaWJlKSxcbiAgICAgICAgICAgIGluc3RhbmNlOiBudWxsXG4gICAgICAgIH07XG5cbiAgICAgICAgbGV0IGNvbXBvbmVuUmVmID0gdGhpcy5jcmVhdGVDb21wb25lbnQoU2xpZGVyQ2Fyb3VzZWxQcmV2aWV3Q29tcG9uZW50LCBkYXRhLCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgb25DbG9zZVN1YnNjcmliZS5uZXh0KGRhdGEpO1xuICAgICAgICB9KTtcbiAgICAgICAgb2JqZWN0Lmluc3RhbmNlID0gKGNvbXBvbmVuUmVmIGFzIENvbXBvbmVudFJlZjxTbGlkZXJDYXJvdXNlbFByZXZpZXdDb21wb25lbnQ+KS5pbnN0YW5jZTtcblxuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgY3JlYXRlQ29tcG9uZW50KGNvbXBvbmVudDogYW55LCBkYXRhLCBvbkNsb3NlOiAoZGF0YSkgPT4gdm9pZCkge1xuICAgICAgICBjb25zdCBjb21wb25lbnRSZWYgPSB0aGlzLmNvbXBvbmVudEZhY3RvcnlSZXNvbHZlclxuICAgICAgICAgICAgLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KGNvbXBvbmVudClcbiAgICAgICAgICAgIC5jcmVhdGUodGhpcy5pbmplY3Rvcik7XG5cbiAgICAgICAgaWYgKCFkYXRhKSBkYXRhID0ge307XG5cbiAgICAgICAgZGF0YS5jbG9zZSA9IChkYXRhKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFwcFJlZi5kZXRhY2hWaWV3KGNvbXBvbmVudFJlZi5ob3N0Vmlldyk7XG4gICAgICAgICAgICBjb21wb25lbnRSZWYuZGVzdHJveSgpO1xuICAgICAgICAgICAgaWYgKG9uQ2xvc2UpIG9uQ2xvc2UoZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICBPYmplY3QuYXNzaWduKGNvbXBvbmVudFJlZi5pbnN0YW5jZSwgeyBtb2RhbFJlZjogZGF0YSB9KTtcblxuICAgICAgICB0aGlzLmFwcFJlZi5hdHRhY2hWaWV3KGNvbXBvbmVudFJlZi5ob3N0Vmlldyk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBkb21FbGVtID0gKGNvbXBvbmVudFJlZi5ob3N0VmlldyBhcyBFbWJlZGRlZFZpZXdSZWY8YW55Pikucm9vdE5vZGVzWzBdIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkb21FbGVtKTtcblxuICAgICAgICByZXR1cm4gY29tcG9uZW50UmVmO1xuICAgIH1cblxuICAgIHB1YmxpYyBzbW9vdGhTY3JvbGwoZWxlbWVudDogSFRNTEVsZW1lbnQsIHNjcm9sbDogbnVtYmVyLCBkdXJhdGlvbjogbnVtYmVyID0gNDAwLCBkaXJlY3Rpb246IHN0cmluZyA9ICd0b3AnKSB7XG5cdFx0bGV0IHN0YXJ0ID0gZGlyZWN0aW9uID09PSAndG9wJyA/IGVsZW1lbnQuc2Nyb2xsVG9wIDogZWxlbWVudC5zY3JvbGxMZWZ0O1xuXG5cdFx0aWYgKHNjcm9sbCA8IDApIHNjcm9sbCA9IDA7XG5cblx0XHRsZXQgZGlzdGFuY2UgPSAoc2Nyb2xsIC0gc3RhcnQpIC0gNzc7XG5cblx0XHRsZXQgc3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cblx0XHRpZiAoIWR1cmF0aW9uKSBkdXJhdGlvbiA9IDQwMDtcblxuXHRcdGxldCBlYXNlSW5PdXRRdWFydCA9ICh0aW1lLCBmcm9tLCBkaXN0YW5jZSwgZHVyYXRpb24pID0+IHtcblx0XHRcdGlmICgodGltZSAvPSBkdXJhdGlvbiAvIDIpIDwgMSlcblx0XHRcdFx0cmV0dXJuIGRpc3RhbmNlIC8gMiAqIHRpbWUgKiB0aW1lICogdGltZSAqIHRpbWUgKyBmcm9tO1xuXHRcdFx0cmV0dXJuIC1kaXN0YW5jZSAvIDIgKiAoKHRpbWUgLT0gMikgKiB0aW1lICogdGltZSAqIHRpbWUgLSAyKSArIGZyb207XG5cdFx0fTtcblxuXHRcdGxldCB0aW1lciA9IHNldEludGVydmFsKCgpID0+IHtcblx0XHRcdGNvbnN0IHRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHN0YXJ0VGltZSxcblx0XHRcdG5ld1Njcm9sbCA9IGVhc2VJbk91dFF1YXJ0KHRpbWUsIHN0YXJ0LCBkaXN0YW5jZSwgZHVyYXRpb24pO1xuXG5cdFx0XHRpZiAodGltZSA+PSBkdXJhdGlvbikge1xuXHRcdFx0XHRjbGVhckludGVydmFsKHRpbWVyKTtcblx0XHRcdFx0dGltZXIgPSBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoZWxlbWVudC5zY3JvbGxUbykge1xuXHRcdFx0XHRpZiAoZGlyZWN0aW9uID09PSAndG9wJylcblx0XHRcdFx0XHRlbGVtZW50LnNjcm9sbFRvKGVsZW1lbnQuc2Nyb2xsTGVmdCwgbmV3U2Nyb2xsKTtcblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdGVsZW1lbnQuc2Nyb2xsVG8obmV3U2Nyb2xsLCBlbGVtZW50LnNjcm9sbFRvcCk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0aWYgKGRpcmVjdGlvbiA9PT0gJ3RvcCcpXG5cdFx0XHRcdFx0ZWxlbWVudC5zY3JvbGxUb3AgPSBuZXdTY3JvbGw7XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRlbGVtZW50LnNjcm9sbExlZnQgPSBuZXdTY3JvbGw7XG5cdFx0XHR9XG5cdFx0fSwgMTAwMCAvIDYwKTtcblxuXHRcdHJldHVybiB0aW1lcjtcbiAgICB9XG4gICAgXG5cdHB1YmxpYyBlbGVtZW50SXNDaGlsZChlbGVtZW50LCBwYXJlbnRFbG1lbnQpOiBib29sZWFue1xuXHRcdHRyeSB7XG5cdFx0XHR3aGlsZSAoZWxlbWVudCAmJiBlbGVtZW50LnRhZ05hbWUudG9VcHBlckNhc2UoKSAhPT0gJ0JPRFknKSB7XG5cdFx0XHRcdGlmIChlbGVtZW50ID09PSBwYXJlbnRFbG1lbnQpIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRjYXRjaCB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9XG5cbiAgICBwdWJsaWMgaXNNb2JpbGVEZXZpY2UoKSB7XG4gICAgICAgIHJldHVybiAodHlwZW9mIHdpbmRvdy5vcmllbnRhdGlvbiAhPT0gXCJ1bmRlZmluZWRcIikgfHwgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignSUVNb2JpbGUnKSAhPT0gLTEpO1xuICAgIH1cbn0iXX0=